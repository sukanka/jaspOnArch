_cranname=jaspProcessControl
_cranver=0.16
pkgname=r-${_cranname,,}
pkgver=${_cranver//[:-]/.}
pkgrel=1
pkgdesc="Quality Control Module for JASP"
arch=('x86_64')
url="https://cran.r-project.org/package=${_cranname}"
license=('GPL')
depends=(r
  r-doe.base
  r-fitdistrplus
  r-frf2
  r-ggplot2
  r-ggrepel
  r-goftest
  r-irr
  r-jaspbase
  r-jaspdescriptives
  r-jaspgraphs
  r-mle.tools
  r-psych
  r-qcc
  r-rsm
  r-rspc
  r-tidyr
  r-cowplot
  r-vipor
  r-ggpp
  r-tibble
  r-envstats
  r-fadist
  r-daewr
  r-desirability
  r-weibullness
)
makedepends=()
optdepends=()
source=("git+https://github.com/jasp-stats/${_cranname}.git")
sha256sums=('SKIP')


build() {
  mkdir -p ${srcdir}/usr/lib/R/library
  R -e "install.packages('${srcdir}/${_cranname}',\
     type='source', repos=NULL,lib='${srcdir}/usr/lib/R/library', INSTALL_opts='--no-multiarch --no-docs --no-test-load')"
}

package() {
  cp -a --no-preserve=ownership "${srcdir}/usr" "${pkgdir}"
  mkdir -p  ${pkgdir}/usr/lib/jasp-desktop/Modules
  ln -s /usr/lib/R/library ${pkgdir}/usr/lib/jasp-desktop/Modules/${_cranname}
}
