_cranname=jmvcore
_cranver=2.3.4
pkgname=r-${_cranname,,}
pkgver=${_cranver//[:-]/.}
pkgrel=1
pkgdesc="Dependencies for the 'jamovi' Framework"
arch=('x86_64')
url="https://cran.r-project.org/package=${_cranname}"
license=('GPL2')
depends=(r
'r-r6'
'r-rlang'
'r-jsonlite'
'r-base64enc'
'r-stringi'
)
optdepends=('r-testthat'
'r-rprotobuf'
'r-knitr'
'r-ggplot2'
'r-rcolorbrewer'
'r-ragg'
'r-fastmap'
)

source=("https://cran.r-project.org/src/contrib/${_cranname}_${_cranver}.tar.gz")
sha256sums=('0a4f1255dfc5f8db72a6ce974397c3b41b624bb45f7ef5b53c5f6cdb011a6cf9')

build() {
  R CMD INSTALL ${_cranname}_${_cranver}.tar.gz -l "${srcdir}"
}

package() {
  install -dm0755 "${pkgdir}/usr/lib/R/library"

  cp -a --no-preserve=ownership "${_cranname}" "${pkgdir}/usr/lib/R/library"
}
